<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Review Item {{ item.id }}</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        .review-container {
            display: flex;
            height: 90vh;
        }
        .image-pane {
            flex: 1;
            padding: 1rem;
            border-right: 1px solid #ddd;
            overflow-y: auto;
        }
        .form-pane {
            flex: 1;
            padding: 1rem;
            overflow-y: auto;
        }
        iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <h2 class="my-3">Reviewing Failed Item: {{ item.id }}</h2>
        <div class="review-container">
            <div class="image-pane">
                <h4>Original Document</h4>
                <iframe src="{{ image_url }}"></iframe>
            </div>
            <div class="form-pane">
                <h4>Extracted Data (Editable)</h4>
                <div class="alert alert-danger">
                    <strong>Failure Reason:</strong> {{ item.exception.message | safe }}
                </div>
                <form action="/resubmit/{{ item.id }}" method="post">
                    <div class="form-group">
                        <label for="invoice_number">Invoice Number</label>
                        <input type="text" class="form-control" id="invoice_number" name="invoice_number" value="">
                    </div>
                    <div class="form-group">
                        <label for="amount">Amount</label>
                        <input type="text" class="form-control" id="amount" name="amount" value="">
                    </div>
                    <div class="form-group">
                        <label for="date">Date</label>
                        <input type="date" class="form-control" id="date" name="date" value="">
                    </div>
                    <hr>
                    <button type="submit" class="btn btn-success">Approve and Resubmit</button>
                    <a href="{{ url_for('review_list') }}" class="btn btn-secondary">Cancel</a>
                </form>
            </div>
        </div>
    </div>
</body>
</html>
